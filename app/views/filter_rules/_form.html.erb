<%= form_with model: filter_rule, url: filter_rules_path, class: "grid gap-3", data: { controller: "filter-form" } do |f| %>
  <div>
    <label class="mb-1 block text-[11px] font-semibold uppercase tracking-wide text-slate-400">Source</label>
    <div class="select-chevron">
      <%= f.collection_select(:calendar_source_id, CalendarSource.order(:name), :id, :name, { include_blank: "All" }, class: select_class) %>
    </div>
  </div>
  <div>
    <label class="mb-1 block text-[11px] font-semibold uppercase tracking-wide text-slate-400">Field</label>
    <div class="select-chevron">
      <%= f.select(:field_name, FilterRule::FIELD_NAMES.values.map { |f| [f.humanize, f] }, {}, class: select_class) %>
    </div>
  </div>
  <div>
    <label class="mb-1 block text-[11px] font-semibold uppercase tracking-wide text-slate-400">Match</label>
    <div class="select-chevron wide-select">
      <%= f.select(:match_type, FilterRule::MATCH_TYPES.values.map { |t| [t.humanize, t] }, {}, class: select_class, data: { filter_form_target: "match", action: "change->filter-form#validate" }) %>
    </div>
  </div>
  <div>
    <%= f.label(:pattern, class: "mb-1 block text-[11px] font-semibold uppercase tracking-wide text-slate-400") %>
    <%= f.text_field(:pattern, required: true, placeholder: "e.g. Team Meeting", class: input_class, data: { filter_form_target: "pattern", action: "input->filter-form#validate" }) %>
    <p data-filter-form-target="error" class="mt-1 hidden text-xs text-rose-300">Invalid regex pattern</p>
  </div>
  <label class="inline-flex items-center gap-2 text-xs text-slate-400">
    <%= f.check_box(:case_sensitive) %>
    Case sensitive
  </label>
  <label class="inline-flex items-center gap-2 text-xs text-slate-400">
    <%= f.check_box(:active, checked: true) %>
    Active
  </label>
  <div class="flex justify-end gap-2">
    <%= f.submit("Add Rule", class: "cursor-pointer rounded-lg bg-red-600 px-4 py-2 text-sm font-medium text-white hover:bg-red-500") %>
  </div>
<% end %>
