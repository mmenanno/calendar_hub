<%= render "shared/page_header",
      nav_active: :sources,
      icon: content_tag(:svg, content_tag(:path, "", "stroke-linecap": "round", "stroke-linejoin": "round", "stroke-width": "1.5", d: "M8 7V3m8 4V3m-9 8h10m-11 8h12a2 2 0 002-2v-8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"), xmlns: "http://www.w3.org/2000/svg", class: "h-6 w-6", fill: "none", viewBox: "0 0 24 24", stroke: "currentColor"),
      title: t("ui.sources.header"),
      subtitle: "Manage external feeds and Apple calendar destinations." do %>
  <%= turbo_stream_from "calendar_sources" %>

    <div class="space-y-6">
      <%= render "shared/collapsible_section",
            id: "new_source_form",
            key: "add-source",
            title: t("ui.sources.add_source"),
            default_open: @calendar_sources.blank? do %>
        <%= render "form", calendar_source: @new_source %>
      <% end %>

      <section id="sources-list" class="space-y-4">
        <% @calendar_sources.each do |source| %>
          <%= render "calendar_sources/source", source: source %>
        <% end %>
      </section>

      <div id="archived-sources-section">
        <%= render "calendar_sources/archived_section", archived_sources: @archived_sources %>
      </div>
    </div>
<% end %>
